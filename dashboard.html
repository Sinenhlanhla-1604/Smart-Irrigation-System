<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Irrigation Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <!-- Header section -->
  <header>Grow<span>Smart</span></header>

  <!-- Start of notification icon div -->
  <div class="notification-icon ()">
    <svg xmlns="http://www.w3.org/2000/svg" height="28" width="28" viewBox="0 0 24 24" fill="white">
      <path d="M12 2C8.13 2 5 5.13 5 9v5H3v2h18v-2h-2V9c0-3.87-3.13-7-7-7zM12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2z"/>
    </svg>
    <!--<span id="notif-count" class="notif-badge"></span>-->
  </div>
  <!-- End of notification icon div -->

  <!-- Start of user info section -->
  <div class="user-logged-in">
    <div class="user-info">
      <div class="user-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </div>
      <div class="user-details">
        <div class="user-name">Farmer</div>
        <div class="farm-name">Puntins</div>
      </div>
    </div>
  </div>
  <!-- End of user info section -->

  <!-- Start of Main Dashboard Grid -->
  <div class="container">

    <!-- Farm Overview Card -->
    <div class="card">
      <h3>Farm Overview</h3>
      <p id="user-name"><strong>User:</strong> farmer_001</p>
      <p><strong>Farm:</strong> <span id="farm-name">Puntins</span></p>
      <div class="metrics-grid" style="margin-top: 1rem;">
        <div class="metric-item">
          <div>Today's Water</div>
          <div class="metric-value" id="water-used">-- L</div>
        </div>
        <div class="metric-item">
          <div>Today's Cost</div>
          <div class="metric-value" id="total-cost">R --</div>
        </div>
      </div>
    </div>

    <!-- Environmental Conditions -->
    <div class="card">
      <h3>Current Temperature</h3>
      <p><strong>Temperature 1:</strong> <span id="temperature_1">-- °C</span></p>
      <p><strong>Temperature 2:</strong> <span id="temperature_2">-- °C</span></p>
      <div id="temp-alert" class="alert" style="display:none"></div>
    </div>

    <!-- Zone Status 
    <div class="card">
      <h3>Zone Status</h3>
      <div id="zone-1-status" class="active-irrigation" style="display: none;">
        <div><span class="status-indicator status-on"></span><strong>Zone 1:</strong> Irrigating</div>
        <div style="margin-top: 0.3rem;">Time remaining: <span id="zone-1-remaining">--</span> min</div>
      </div>
      <div id="zone-2-status" class="active-irrigation" style="display: none;">
        <div><span class="status-indicator status-on"></span><strong>Zone 2:</strong> Irrigating</div>
        <div style="margin-top: 0.3rem;">Time remaining: <span id="zone-2-remaining">--</span> min</div>
      </div>
      <div id="zone-3-status" class="active-irrigation" style="display: none;">
        <div><span class="status-indicator status-on"></span><strong>Zone 3:</strong> Irrigating</div>
        <div style="margin-top: 0.3rem;">Time remaining: <span id="zone-3-remaining">--</span> min</div>
      </div>
      <div id="next-irrigation">
        <p><strong>Next Irrigation:</strong> <span id="next-irrigation-time">--:--</span></p>
      </div>
    </div>-->

    <!-- Water Detection Card -->
    <div class="card">
      <h3>Water Detection</h3>
      <ul style="list-style: none; padding-left: 0;">
        <li><span class="status-indicator" id="water-1-indicator"></span> Zone 1: <span id="water-1-status" class="water-status">--</span></li>
        <li><span class="status-indicator" id="water-2-indicator"></span> Zone 2: <span id="water-2-status" class="water-status">--</span></li>
        <li><span class="status-indicator" id="water-3-indicator"></span> Zone 3: <span id="water-3-status" class="water-status">--</span></li>
      </ul>
      <div id="water-alert" class="alert" style="display:none; margin-top: 1rem;"></div>
    </div>

    <!-- Pump & System Status Card 
    <div class="card">
      <h3>Pump & System Status</h3>
      <p><strong>Pump:</strong> <span id="pump-status">--</span></p>
      <p><strong>System:</strong> <span class="green">Operational</span></p>
      <p><strong>Last Update:</strong> <span id="last-check">--</span></p>
      <div id="pump-alert" class="alert" style="display:none; margin-top: 1rem;"></div>
    </div>-->

    <!-- Leak Detection Card -->
    <div class="card" id="leak-card">
      <h3>Pulse Detector</h3>
      <p><strong>Pulse: </strong> <span id="pulse_count">--L</span></p>
      <p><strong>Leakage Stat:</strong> 
        <span id="leak-status">
          <svg id="leak-icon" xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24" class="leak-icon">
            <path d="M12 2C8 7 6 10 6 13a6 6 0 0 0 12 0c0-3-2-6-6-11z"/>
          </svg>
          <span id="leak-text">No Leak</span>
        </span>
      </p>
    </div>

    <!-- Water Usage Analytics -->
    <div class="card">
      <h3>Water Usage Analytics</h3>
      <canvas id="dailyChart"></canvas>
      <p style="margin-top: 0.5rem;"><strong>Weekly Total:</strong> <span id="weekly-total">--</span> L</p>
    </div>

    <!-- Irrigation Schedule -->
    <div class="card">
      <h3>Irrigation Schedule</h3>
      <div id="irrigation-controls">
        <div class="zone-control">
          <label>Zone 1:</label>
          <input type="time" id="zone-1-time" value="06:00">
          <input type="number" id="zone-1-duration" value="10" min="1" max="120">
          <span>min</span>
          <button disabled>Update</button>
        </div>
        <div class="zone-control">
          <label>Zone 2:</label>
          <input type="time" id="zone-2-time" value="06:30">
          <input type="number" id="zone-2-duration" value="12" min="1" max="120">
          <span>min</span>
          <button disabled>Update</button>
        </div>
        <div class="zone-control">
          <label>Zone 3:</label>
          <input type="time" id="zone-3-time" value="07:00">
          <input type="number" id="zone-3-duration" value="8" min="1" max="120">
          <span>min</span>
          <button disabled>Update</button>
        </div>
      </div>
      <div id="schedule-alert" class="alert" style="display:none; margin-top: 1rem;"></div>
    </div>

    <!-- Water Detection Card -->
    <div class="card">
      <h3>Door Status</h3>
      <ul style="list-style: none; padding-left: 0;">
        <li><span class="status-indicator" id="Door-1-indicator"></span> Door 1: <span id="Door-1-status" class="Door-status">--</span></li>
        <li><span class="status-indicator" id="Door-2-indicator"></span> Door 2: <span id="Door-2-status" class="Door-status">--</span></li>
      </ul>
      <div id="Door-alert" class="alert" style="display:none; margin-top: 1rem;"></div>
    </div>

    <div class="card">
      <h3>Notifications</h3>
      <ul>
        <li></li>
        <li></li>
      </ul>
    </div>
  </div>
  <div class="range-history">
    <h3>System Usage History</h3>
    
    <div class="search-controls">
      <div class="date-range">
        <label for="start-date">From:</label>
        <input type="date" id="start-date">
        
        <label for="end-date">To:</label>
        <input type="date" id="end-date">
        
        <button id="search-btn" class="search-button">Search</button>
      </div>
      
      <div class="filter-options">
        <label for="metric-select">Metric:</label>
        <select id="metric-select">
          <option value="water">Water Usage</option>
          <option value="energy">Energy Consumption</option>
          <option value="duration">Irrigation Duration</option>
          <option value="all">All Metrics</option>
        </select>
        
        <label for="zone-select">Zone:</label>
        <select id="zone-select">
          <option value="all">All Zones</option>
          <option value="1">Zone 1</option>
          <option value="2">Zone 2</option>
          <option value="3">Zone 3</option>
        </select>
      </div>
    </div>
    
    <div class="results-container">
      <div class="results-header">
        <span class="header-date">Date</span>
        <span class="header-zone">Zone</span>
        <span class="header-metric">Water (L)</span>
        <span class="header-metric">Energy (kWh)</span>
        <span class="header-metric">Duration (min)</span>
      </div>
      
      <div class="results-body" id="usage-results">
        <!-- Results will be populated here by JavaScript -->
        <div class="no-results">No data available for selected range</div>
      </div>
      
      <div class="results-footer">
        <div class="summary-stats">
          <span>Total Water: <span id="total-water">0</span> L</span>
          <span>Total Energy: <span id="total-energy">0</span> kWh</span>
          <span>Total Duration: <span id="total-duration">0</span> min</span>
        </div>
        <button id="export-btn" class="export-button">Export to CSV</button>
      </div>
    </div>
  </div>
  <!-- End of Main Dashboard Grid -->
</body>
</html>
